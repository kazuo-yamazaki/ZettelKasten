# 工程部品の実行の仕組み
工程ユニットの中の工程部品は、実行順序に従って一列に並べられる。

実行周期毎に、最初の工程部品から、最後の工程部品まで順番に実行権が渡される。
工程部品は実行権を受け取ると実行される。初期状態や、終了状態で実行権を受け取ってもすぐに終了する。初期状態で実行コマンドを受け取っていると実行状態に移り、処理を実行し、終了状態になり、次の工程部品に、実行権を受け渡す。タイマー部品など一部の部品は実行状態のまま、実行権を受け渡すものあるが、通常はすぐに終了状態となる。

例えば工程フローの途中の工程部品に対して手動実行を行った場合でも、次の実行周期で、実行順序に従って最初の工程部品から、最後の工程部品まで順番に実行権が渡されることには変わりがない。もし手動実行された工程部品より前方にある工程がすべて終了状態ならば、頭から順番に実行権が渡されて、この手動実行された部品まで実行権が到達し、この部品が実行される。
もし、手動実行された工程部品より前方に初期状態でかつ実行コマンドを持つ工程部品があれば、そこから実行が始まり、手動実行された工程部品に対して、前の工程部品から実行コマンドが渡された場合、実行コマンドは2つキューイングされずに、1つだけキューイングされる。そのため、普通に処理が実施される。

工程フロー中に工程ユニットがあった場合、工程ユニットに実行コマンドが送られてきた場合、0.1秒後に工程ユニットの先頭に実行コマンドが送られる。
工程ユニットはそれぞれ独自の実行周期をもつので、この実行コマンドを受け取ると次の実行周期のタイミングで処理が始まる。工程ユニットの最後の工程部品が終了し、するとイベントが親ユニットに送られ、親ユニットは実行コマンドを工程ユニットの次の工程部品にセットし、実行周期とは関係なく、工程フローの先頭から実行権を与える。


